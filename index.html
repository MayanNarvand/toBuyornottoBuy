<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>To Buy or Not To Buy</title>
  <style>
    body {
      font-family: "Vazirmatn", sans-serif;
      background: #f2f4f8;
      color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .chatbox {
      background: #fff;
      width: 420px;
      border-radius: 18px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      padding: 25px;
      text-align: center;
      transition: all 0.3s ease;
    }

    h2 { color: #444; margin-bottom: 10px; }
    .subtitle { color: #777; font-size: 13px; margin-bottom: 20px; }

    button {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      background-color: #3c79e6;
      color: #fff;
      cursor: pointer;
      transition: 0.2s;
      font-size: 14px;
      margin-top: 10px;
    }

    button:hover { background-color: #2f63c3; }

    select {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 10px;
      font-size: 14px;
    }

    .step { display: none; animation: fadeIn 0.4s ease; }
    .step.active { display: block; }

    @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }

    .result {
      margin-top: 20px;
      background: #f8fafc;
      border: 1px solid #eee;
      border-radius: 10px;
      padding: 15px;
      line-height: 1.6;
    }
  </style>
</head>
<body>

<div class="chatbox">
  <h2>To Buy or Not To Buy ๐ง</h2>
  <div class="subtitle">ุฐูู ุฏุฑ ูุญุธู ุฎุฑุฏ</div>

  <!-- ูุฑุญูู ฑ: ูููุฏุงุฑ -->
  <div class="step active" id="step1">
    <canvas id="buyMindChart" width="300" height="300"></canvas>
    <p style="font-size:13px;color:#555;line-height:1.6">
      ุชุตูู ุฎุฑุฏ ูุนูููุงู ุงุฒ ุฏู ุงู ฺูุงุฑ ูุฑู ุจุฑูู ูโุขุฏ.<br>
      ูุฏู ูุง ฺฉูฺฉ ุจู ุงู ุงุณุช ฺฉู ุจุฎุด <b>ูุงุฒ ูุงูุน</b> ุฑุง ููโุชุฑ ฺฉู.
    </p>
    <button onclick="nextStep(2)">ุดุฑูุน ฺฏูุชโูฺฏู ๐</button>
  </div>

  <!-- ูุฑุญูู ฒ ุชุง ถ: ูพุฑุณุดโูุง -->
  <div class="step" id="step2">
    <label>ฑ. ููุช ุจู ุงู ุฎุฑุฏ ูฺฉุฑ ูโฺฉูุ ุจุดุชุฑ ุญุณ ูุฌุงู ุฏุงุฑ ุง ูุงุฒุ</label>
    <select id="q1">
      <option value="">-- ุงูุชุฎุงุจ ฺฉู --</option>
      <option value="excitement">ูุฌุงู</option>
      <option value="need">ูุงุฒ ูุงูุน</option>
    </select>
    <button onclick="nextStep(3)">ุงุฏุงูู โก๏ธ</button>
  </div>

  <div class="step" id="step3">
    <label>ฒ. ุงฺฏู ุงูุฑูุฒ ูุฎุฑุ ุญุณ ูโฺฉู ู ูุฑุตุช ุฎุงุต ุฑู ุงุฒ ุฏุณุช ูโุฏุ</label>
    <select id="q2">
      <option value="">-- ุงูุชุฎุงุจ ฺฉู --</option>
      <option value="yes">ุจููุ ุงุฒ ุฏุณุช ูโุฑู!</option>
      <option value="no">ููุ ููุดู ูโุชููู ุจุนุฏุงู ุจุฎุฑู</option>
    </select>
    <button onclick="nextStep(4)">ุงุฏุงูู โก๏ธ</button>
  </div>

  <div class="step" id="step4">
    <label>ณ. ุจุนุฏ ุงุฒ ุฎุฑุฏุ ูุนูููุงู ุงุฒ ฺุฒูุง ุดุจู ุงู ฺูุฏุฑ ุงุณุชูุงุฏู ูโฺฉูุ</label>
    <select id="q3">
      <option value="">-- ุงูุชุฎุงุจ ฺฉู --</option>
      <option value="rare">ฺฉู ุง ููุท ุงููุด</option>
      <option value="medium">ฺฏุงู ุงููุงุช</option>
      <option value="often">ุฒุงุฏ ู ูุฑุชุจ</option>
    </select>
    <button onclick="nextStep(5)">ุงุฏุงูู โก๏ธ</button>
  </div>

  <div class="step" id="step5">
    <label>ด. ุขุง ุจุฑุง ุฎุฑุฏุด ุจุงุฏ ุงุฒ ุจูุฏุฌู ุง ูพุณโุงูุฏุงุฒ ุจุฒูุ</label>
    <select id="q4">
      <option value="">-- ุงูุชุฎุงุจ ฺฉู --</option>
      <option value="tight">ุจููุ ุจุงุฏ ุตุฑูโูุธุฑ ฺฉูู</option>
      <option value="ok">ู ฺฉู ูุดุฑุฏู ูโุดู</option>
      <option value="fine">ููุ ุจูโุฑุงุญุช ูโุฎุฑู</option>
    </select>
    <button onclick="nextStep(6)">ุงุฏุงูู โก๏ธ</button>
  </div>

  <div class="step" id="step6">
    <label>ต. ุงฺฏู ุงู ุฎุฑุฏ ุฑู ุชุง ูุฑุฏุง ุนูุจ ุจูุฏุงุฒุ ุญุณ ุงูุงูุช ุนูุถ ูโุดูุ</label>
    <select id="q5">
      <option value="">-- ุงูุชุฎุงุจ ฺฉู --</option>
      <option value="yes">ุงุญุชูุงูุงู ฺฉูุชุฑ ูโุฎูุงูุด</option>
      <option value="no">ููุ ูููุฒ ูโุฎูุงูุด</option>
    </select>
    <button onclick="analyze()">ุชุญูู ฺฉู ๐งฉ</button>
  </div>

  <!-- ูุชุฌู -->
  <div class="step" id="step7">
    <div id="result" class="result"></div>
    <button onclick="restart()">ุดุฑูุน ุฏูุจุงุฑู ๐</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
<script>
  // ุฑุณู ูููุฏุงุฑ ุจุง ุฏุฑุตุฏ ุนุฏุฏ
  const ctx = document.getElementById('buyMindChart');
  const chart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ['ูุฌุงู ูุญุธูโุง', 'ุชุฑุณ ุงุฒ ุฏุณุช ุฏุงุฏู (FOMO)', 'ูู ุจู ูพุงุฏุงุด ููุฑ', 'ูุงุฒ ูุงูุน'],
      datasets: [{
        data: [40, 30, 20, 10],
        backgroundColor: ['#ff6b6b', '#feca57', '#54a0ff', '#1dd1a1'],
        borderWidth: 0
      }]
    },
    options: {
      animation: { animateRotate: true, duration: 2000 },
      plugins: {
        legend: {
          position: 'bottom',
          labels: { font: { family: "Vazirmatn" } }
        },
        datalabels: {
          color: '#fff',
          formatter: (value) => value + '%',
          font: { weight: 'bold', size: 14 }
        }
      }
    },
    plugins: [ChartDataLabels]
  });

  function nextStep(step) {
    const current = document.querySelector('.step.active');
    const selects = current.querySelectorAll('select');
    if (selects.length && !selects[0].value) {
      alert("ูุทูุงู ูพุงุณุฎ ุจุฏู ๐ฑ");
      return;
    }
    current.classList.remove('active');
    document.getElementById('step' + step).classList.add('active');
  }

  function analyze() {
    const q1 = document.getElementById('q1').value;
    const q2 = document.getElementById('q2').value;
    const q3 = document.getElementById('q3').value;
    const q4 = document.getElementById('q4').value;
    const q5 = document.getElementById('q5').value;
    if (!q1 || !q2 || !q3 || !q4 || !q5) { alert("ุจู ููู ุณูุงูโูุง ุฌูุงุจ ุจุฏู ๐ฑ"); return; }

    let score = 0;
    if (q1 === "excitement") score += 2;
    if (q2 === "yes") score += 1;
    if (q3 === "rare") score += 1;
    if (q4 === "tight") score += 2;
    if (q5 === "yes") score += 1;

    let message = "";
    if (score >= 5) {
      message = "ุจู ูุธุฑ ูโุฑุณู ุชุตูู ุฎุฑุฏุช ุจุดุชุฑ ุงุฒ ุฑู ูุฌุงู ู ุชุฑุณ ุงุฒ ุฏุณุช ุฏุงุฏูู ๐<br>ุจูุชุฑู ุฎุฑุฏ ุฑู ฒด ุณุงุนุช ุนูุจ ุจูุฏุงุฒ ุชุง ุฐููุช ุขุฑููโุชุฑ ุชุตูู ุจฺฏุฑู.";
    } else if (score >= 3) {
      message = "ุชุตููุช ุฏุฑ ูุฑุฒ ุจู ูุงุฒ ู ูู ูุญุธูโุงู โ ู ุจุงุฒูฺฏุฑ ฺฉูุชุงู ูโุชููู ููุฏ ุจุงุดู.";
    } else {
      message = "ุชุตููุช ููุทู ู ูุชุนุงุฏู ุจู ูุธุฑ ูโุฑุณู ๐<br>ุงฺฏุฑ ูููุฒ ุจุฑุงุช ููุฏูุ ุฎุฑุฏุด ูุงูุน ูุฏุงุฑู.";
    }

    document.querySelector('.step.active').classList.remove('active');
    document.getElementById('result').innerHTML = message;
    document.getElementById('step7').classList.add('active');
  }

  function restart() {
    document.querySelector('.step.active').classList.remove('active');
    document.getElementById('step1').classList.add('active');
    document.querySelectorAll('select').forEach(s => s.value = "");
    document.getElementById('result').innerHTML = "";
  }
</script>

</body>
</html>
